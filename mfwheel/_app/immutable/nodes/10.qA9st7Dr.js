import{s as Z,e as B,i as C,n as V,d as _,W as ye,a as R,t as H,c as L,b as F,f as $,q as y,h as T,r as N,j as he,k as P,m as z,p as D,u as Ie,o as ue,w as ne,l as Se}from"../chunks/scheduler.jlYw4Pw6.js";import{S as ee,i as te,b as de,d as ce,m as me,a as X,t as Y,e as fe,c as Re,g as Le}from"../chunks/index.afzxeEEq.js";import{s as Me}from"../chunks/shuffleArray.sZTx0byE.js";import{g as ke}from"../chunks/getSaveVersion.KkvTnZhM.js";const Ee=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;var c={};Object.defineProperty(c,"__esModule",{value:!0});c.linear=We;c.easeInSine=Oe;c.easeOutSine=Ve;c.easeInOutSine=Ae;c.easeInQuad=Pe;c.easeOutQuad=ze;c.easeInOutQuad=Fe;c.easeInCubic=De;c.easeOutCubic=Be;c.easeInOutCubic=Ne;c.easeInQuart=qe;var Te=c.easeOutQuart=je;c.easeInOutQuart=Qe;c.easeInQuint=He;c.easeOutQuint=$e;c.easeInOutQuint=Xe;c.easeInExpo=Ye;c.easeOutExpo=Ue;c.easeInOutExpo=Je;c.easeInCirc=Ke;c.easeOutCirc=Ge;c.easeInOutCirc=Ze;c.easeInBack=et;c.easeOutBack=tt;c.easeInOutBack=it;c.easeInElastic=nt;c.easeOutElastic=rt;c.easeInOutElastic=st;c.easeOutBounce=ie;c.easeInBounce=ge;c.easeInOutBounce=at;function We(e){return e}function Oe(e){return-1*Math.cos(e*(Math.PI/2))+1}function Ve(e){return Math.sin(e*(Math.PI/2))}function Ae(e){return-.5*(Math.cos(Math.PI*e)-1)}function Pe(e){return e*e}function ze(e){return e*(2-e)}function Fe(e){return e<.5?2*e*e:-1+(4-2*e)*e}function De(e){return e*e*e}function Be(e){var t=e-1;return t*t*t+1}function Ne(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}function qe(e){return e*e*e*e}function je(e){var t=e-1;return 1-t*t*t*t}function Qe(e){var t=e-1;return e<.5?8*e*e*e*e:1-8*t*t*t*t}function He(e){return e*e*e*e*e}function $e(e){var t=e-1;return 1+t*t*t*t*t}function Xe(e){var t=e-1;return e<.5?16*e*e*e*e*e:1+16*t*t*t*t*t}function Ye(e){return e===0?0:Math.pow(2,10*(e-1))}function Ue(e){return e===1?1:-Math.pow(2,-10*e)+1}function Je(e){if(e===0||e===1)return e;var t=e*2,i=t-1;return t<1?.5*Math.pow(2,10*i):.5*(-Math.pow(2,-10*i)+2)}function Ke(e){var t=e/1;return-1*(Math.sqrt(1-t*e)-1)}function Ge(e){var t=e-1;return Math.sqrt(1-t*t)}function Ze(e){var t=e*2,i=t-2;return t<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-i*i)+1)}function et(e){var t=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],i=e/1;return i*i*((t+1)*i-t)}function tt(e){var t=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],i=e/1-1;return i*i*((t+1)*i+t)+1}function it(e){var t=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],i=e*2,n=i-2,r=t*1.525;return i<1?.5*i*i*((r+1)*i-r):.5*(n*n*((r+1)*n+r)+2)}function nt(e){var t=arguments.length<=1||arguments[1]===void 0?.7:arguments[1];if(e===0||e===1)return e;var i=e/1,n=i-1,r=1-t,s=r/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/r))}function rt(e){var t=arguments.length<=1||arguments[1]===void 0?.7:arguments[1],i=1-t,n=e*2;if(e===0||e===1)return e;var r=i/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*n)*Math.sin((n-r)*(2*Math.PI)/i)+1}function st(e){var t=arguments.length<=1||arguments[1]===void 0?.65:arguments[1],i=1-t;if(e===0||e===1)return e;var n=e*2,r=n-1,s=i/(2*Math.PI)*Math.asin(1);return n<1?-.5*(Math.pow(2,10*r)*Math.sin((r-s)*(2*Math.PI)/i)):Math.pow(2,-10*r)*Math.sin((r-s)*(2*Math.PI)/i)*.5+1}function ie(e){var t=e/1;if(t<1/2.75)return 7.5625*t*t;if(t<2/2.75){var i=t-.5454545454545454;return 7.5625*i*i+.75}else if(t<2.5/2.75){var n=t-.8181818181818182;return 7.5625*n*n+.9375}else{var r=t-.9545454545454546;return 7.5625*r*r+.984375}}function ge(e){return 1-ie(1-e)}function at(e){return e<.5?ge(e*2)*.5:ie(e*2-1)*.5+.5}function ot(e){var t,i=[e[0].weight];for(t=1;t<e.length;t++)i[t]=e[t].weight+i[t-1];var n=Math.random()*i[i.length-1];for(t=0;t<i.length&&!(i[t]>n);t++);return e[t].item}var lt=Object.defineProperty,re=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,J=Math.pow,se=(e,t,i)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,K=(e,t)=>{for(var i in t||(t={}))ht.call(t,i)&&se(e,i,t[i]);if(re)for(var i of re(t))ut.call(t,i)&&se(e,i,t[i]);return e};function dt(e=0,t=0,i=14){return parseFloat((Math.random()*(t-e)+e).toFixed(i))}function E(e=0){return e*Math.PI/180}function ct(e,t,i){return t<i?t<=e&&e<i:t<=e||e<i}function mt(e,t,i,n){n.save(),n.font=`1px ${t}`;let r=n.measureText(e).width;return n.restore(),i/r}function ft(e={x:0,y:0},t,i,n){return J(e.x-t,2)+J(e.y-i,2)<=J(n,2)}function G(e={x:0,y:0},t={},i=1){let n=t.getBoundingClientRect();return{x:(e.x-n.left)*i,y:(e.y-n.top)*i}}function gt(e,t,i,n){let r=e-i,s=t-n,a=Math.atan2(-s,-r);return a*=180/Math.PI,a<0&&(a+=360),a}function _t(e=0,t=0){let i=e+t,n;return i>0?n=i%360:n=360+i%360,n===360&&(n=0),n}function bt(e=0,t=0){let i=180-t;return 180-_t(e,i)}function pt(e=0,t=0,i=1){let n=(e%360+t)%360;return n=vt(n),n=(i===1?360-n:360+n)%360,n*=i,e+n}function U(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}function x(e){return typeof e=="number"&&!Number.isNaN(e)}function f({val:e,isValid:t,errorMessage:i,defaultValue:n,action:r=null}){if(t)return r?r():e;if(e===void 0)return n;throw new Error(i)}function ae(e){return e&&e.complete&&e.naturalWidth!==0&&e.naturalHeight!==0}function vt(e=0){return Number(e.toFixed(9))}function wt(e){return Math.sin(e*Math.PI/2)}var Ct=Object.freeze({left:"left",right:"right",center:"center"}),u=Object.freeze({wheel:{borderColor:"#000",borderWidth:1,debug:!1,image:null,isInteractive:!0,itemBackgroundColors:["#fff"],itemLabelAlign:Ct.right,itemLabelBaselineOffset:0,itemLabelColors:["#000"],itemLabelFont:"sans-serif",itemLabelFontSizeMax:500,itemLabelRadius:.85,itemLabelRadiusMax:.2,itemLabelRotation:0,itemLabelStrokeColor:"#fff",itemLabelStrokeWidth:0,items:[],lineColor:"#000",lineWidth:1,pixelRatio:0,radius:.95,rotation:0,rotationResistance:-35,rotationSpeedMax:300,offset:{w:0,h:0},onCurrentIndexChange:null,onRest:null,onSpin:null,overlayImage:null,pointerAngle:0},item:{backgroundColor:null,image:null,imageOpacity:1,imageRadius:.5,imageRotation:0,imageScale:1,label:"",labelColor:null,value:null,weight:1}}),j=Object.freeze({pointerLineColor:"#ff00ff",labelOutlineColor:"#ff00ff",labelRadiusColor:"#00ff00",dragEventHue:200});function xt(e={}){It(e),e._handler_onResize=i=>e.resize(i),window.addEventListener("resize",e._handler_onResize);let t=()=>{e._mediaQueryList=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),e._mediaQueryList.addEventListener("change",e._handler_onDevicePixelRatioChange,{once:!0})};e._handler_onDevicePixelRatioChange=()=>{e.resize(),t()},t()}function yt(e={}){let t=e.canvas;"PointerEvent"in window?(t.removeEventListener("pointerdown",e._handler_onPointerDown),t.removeEventListener("pointermove",e._handler_onPointerMoveRefreshCursor)):(t.removeEventListener("touchstart",e._handler_onTouchStart),t.removeEventListener("mousedown",e._handler_onMouseDown),t.removeEventListener("mousemove",e._handler_onMouseMoveRefreshCursor)),window.removeEventListener("resize",e._handler_onResize),e._mediaQueryList.removeEventListener("change",e._handler_onDevicePixelRatioChange)}function It(e={}){let t=e.canvas;e._handler_onPointerMoveRefreshCursor=(i={})=>{let n={x:i.clientX,y:i.clientY};e._isCursorOverWheel=e.wheelHitTest(n),e.refreshCursor()},e._handler_onMouseMoveRefreshCursor=(i={})=>{let n={x:i.clientX,y:i.clientY};e._isCursorOverWheel=e.wheelHitTest(n),e.refreshCursor()},e._handler_onPointerDown=(i={})=>{let n={x:i.clientX,y:i.clientY};if(!e.isInteractive||!e.wheelHitTest(n))return;i.preventDefault(),e.dragStart(n),t.setPointerCapture(i.pointerId),t.addEventListener("pointermove",r),t.addEventListener("pointerup",s),t.addEventListener("pointercancel",s),t.addEventListener("pointerout",s);function r(a={}){a.preventDefault(),e.dragMove({x:a.clientX,y:a.clientY})}function s(a={}){a.preventDefault(),t.releasePointerCapture(a.pointerId),t.removeEventListener("pointermove",r),t.removeEventListener("pointerup",s),t.removeEventListener("pointercancel",s),t.removeEventListener("pointerout",s),e.dragEnd()}},e._handler_onMouseDown=(i={})=>{let n={x:i.clientX,y:i.clientY};if(!e.isInteractive||!e.wheelHitTest(n))return;e.dragStart(n),document.addEventListener("mousemove",r),document.addEventListener("mouseup",s);function r(a={}){a.preventDefault(),e.dragMove({x:a.clientX,y:a.clientY})}function s(a={}){a.preventDefault(),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",s),e.dragEnd()}},e._handler_onTouchStart=(i={})=>{let n={x:i.targetTouches[0].clientX,y:i.targetTouches[0].clientY};if(!e.isInteractive||!e.wheelHitTest(n))return;i.preventDefault(),e.dragStart(n),t.addEventListener("touchmove",r),t.addEventListener("touchend",s),t.addEventListener("touchcancel",s);function r(a={}){a.preventDefault(),e.dragMove({x:a.targetTouches[0].clientX,y:a.targetTouches[0].clientY})}function s(a={}){a.preventDefault(),t.removeEventListener("touchmove",r),t.removeEventListener("touchend",s),t.removeEventListener("touchcancel",s),e.dragEnd()}},"PointerEvent"in window?(t.addEventListener("pointerdown",e._handler_onPointerDown),t.addEventListener("pointermove",e._handler_onPointerMoveRefreshCursor)):(t.addEventListener("touchstart",e._handler_onTouchStart),t.addEventListener("mousedown",e._handler_onMouseDown),t.addEventListener("mousemove",e._handler_onMouseMoveRefreshCursor))}var St=class{constructor(e,t={}){if(!U(e))throw new Error("wheel must be an instance of Wheel");if(!U(t)&&t!==null)throw new Error("props must be an Object or null");this._wheel=e;for(let i of Object.keys(u.item))this["_"+i]=u.item[i];t?this.init(t):this.init(u.item)}init(e={}){this.backgroundColor=e.backgroundColor,this.image=e.image,this.imageOpacity=e.imageOpacity,this.imageRadius=e.imageRadius,this.imageRotation=e.imageRotation,this.imageScale=e.imageScale,this.label=e.label,this.labelColor=e.labelColor,this.value=e.value,this.weight=e.weight}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){typeof e=="string"?this._backgroundColor=e:this._backgroundColor=u.item.backgroundColor,this._wheel.refresh()}get image(){return this._image}set image(e){let t;typeof e=="string"?(t=new Image,t.src=e,t.onload=i=>this._wheel.refresh()):t=u.item.image,this._image=t,this._wheel.refresh()}get imageOpacity(){return this._imageOpacity}set imageOpacity(e){typeof e=="number"?this._imageOpacity=e:this._imageOpacity=u.item.imageOpacity,this._wheel.refresh()}get imageRadius(){return this._imageRadius}set imageRadius(e){typeof e=="number"?this._imageRadius=e:this._imageRadius=u.item.imageRadius,this._wheel.refresh()}get imageRotation(){return this._imageRotation}set imageRotation(e){typeof e=="number"?this._imageRotation=e:this._imageRotation=u.item.imageRotation,this._wheel.refresh()}get imageScale(){return this._imageScale}set imageScale(e){typeof e=="number"?this._imageScale=e:this._imageScale=u.item.imageScale,this._wheel.refresh()}get label(){return this._label}set label(e){typeof e=="string"?this._label=e:this._label=u.item.label,this._wheel.refresh()}get labelColor(){return this._labelColor}set labelColor(e){typeof e=="string"?this._labelColor=e:this._labelColor=u.item.labelColor,this._wheel.refresh()}get value(){return this._value}set value(e){e!==void 0?this._value=e:this._value=u.item.value}get weight(){return this._weight}set weight(e){typeof e=="number"?this._weight=e:this._weight=u.item.weight}getIndex(){let e=this._wheel.items.findIndex(t=>t===this);if(e===-1)throw new Error("Item not found in parent Wheel");return e}getCenterAngle(){let e=this._wheel.getItemAngles()[this.getIndex()];return e.start+(e.end-e.start)/2}getStartAngle(){return this._wheel.getItemAngles()[this.getIndex()].start}getEndAngle(){return this._wheel.getItemAngles()[this.getIndex()].end}getRandomAngle(){return dt(this.getStartAngle(),this.getEndAngle())}},Rt=class{constructor(e,t={}){if(!(e instanceof Element))throw new Error("container must be an instance of Element");if(!U(t)&&t!==null)throw new Error("props must be an Object or null");this._frameRequestId=null,this._rotationSpeed=0,this._rotationDirection=1,this._spinToTimeEnd=null,this._lastSpinFrameTime=null,this._isCursorOverWheel=!1,this.add(e);for(let i of Object.keys(u.wheel))this["_"+i]=u.wheel[i];t?this.init(t):this.init(u.wheel)}init(e={}){this._isInitialising=!0,this.borderColor=e.borderColor,this.borderWidth=e.borderWidth,this.debug=e.debug,this.image=e.image,this.isInteractive=e.isInteractive,this.itemBackgroundColors=e.itemBackgroundColors,this.itemLabelAlign=e.itemLabelAlign,this.itemLabelBaselineOffset=e.itemLabelBaselineOffset,this.itemLabelColors=e.itemLabelColors,this.itemLabelFont=e.itemLabelFont,this.itemLabelFontSizeMax=e.itemLabelFontSizeMax,this.itemLabelRadius=e.itemLabelRadius,this.itemLabelRadiusMax=e.itemLabelRadiusMax,this.itemLabelRotation=e.itemLabelRotation,this.itemLabelStrokeColor=e.itemLabelStrokeColor,this.itemLabelStrokeWidth=e.itemLabelStrokeWidth,this.items=e.items,this.lineColor=e.lineColor,this.lineWidth=e.lineWidth,this.pixelRatio=e.pixelRatio,this.rotationSpeedMax=e.rotationSpeedMax,this.radius=e.radius,this.rotation=e.rotation,this.rotationResistance=e.rotationResistance,this.offset=e.offset,this.onCurrentIndexChange=e.onCurrentIndexChange,this.onRest=e.onRest,this.onSpin=e.onSpin,this.overlayImage=e.overlayImage,this.pointerAngle=e.pointerAngle}add(e){this._canvasContainer=e,this.canvas=document.createElement("canvas"),this._context=this.canvas.getContext("2d"),this._canvasContainer.append(this.canvas),xt(this),this._isInitialising===!1&&this.resize()}remove(){this.canvas!==null&&(window.cancelAnimationFrame(this._frameRequestId),yt(this),this._canvasContainer.removeChild(this.canvas),this._canvasContainer=null,this.canvas=null,this._context=null)}resize(){this.canvas.style.width=this._canvasContainer.clientWidth+"px",this.canvas.style.height=this._canvasContainer.clientHeight+"px";let[e,t]=[this._canvasContainer.clientWidth*this.getActualPixelRatio(),this._canvasContainer.clientHeight*this.getActualPixelRatio()];this.canvas.width=e,this.canvas.height=t;let i=Math.min(e,t),n={w:i-i*this.offset.w,h:i-i*this.offset.h},r=Math.min(e/n.w,t/n.h);this._size=Math.max(n.w*r,n.h*r),this._center={x:e/2+e*this.offset.w,y:t/2+t*this.offset.h},this._actualRadius=this._size/2*this.radius,this.itemLabelFontSize=this.itemLabelFontSizeMax*(this._size/500),this.labelMaxWidth=this._actualRadius*(this.itemLabelRadius-this.itemLabelRadiusMax);for(let s of this._items)this.itemLabelFontSize=Math.min(this.itemLabelFontSize,mt(s.label,this.itemLabelFont,this.labelMaxWidth,this._context));this.refresh()}draw(e=0){this._frameRequestId=null;let t=this._context;t.clearRect(0,0,this.canvas.width,this.canvas.height),this.animateRotation(e);let i=this.getItemAngles(this._rotation),n=this.getScaledNumber(this._borderWidth);t.textBaseline="middle",t.textAlign=this.itemLabelAlign,t.font=this.itemLabelFontSize+"px "+this.itemLabelFont,t.save();for(let[r,s]of i.entries()){let a=new Path2D;a.moveTo(this._center.x,this._center.y),a.arc(this._center.x,this._center.y,this._actualRadius-n/2,E(s.start+-90),E(s.end+-90)),this._items[r].path=a}this.drawItemBackgrounds(t,i),this.drawItemImages(t,i),this.drawItemLines(t,i),this.drawItemLabels(t,i),this.drawBorder(t),this.drawImage(t,this._image,!1),this.drawImage(t,this._overlayImage,!0),this.drawPointerLine(t),this.drawDragEvents(t),this._isInitialising=!1}drawItemBackgrounds(e,t=[]){var i;for(let[n,r]of t.entries()){let s=this._items[n];e.fillStyle=(i=s.backgroundColor)!=null?i:this._itemBackgroundColors[n%this._itemBackgroundColors.length],e.fill(s.path)}}drawItemImages(e,t=[]){for(let[i,n]of t.entries()){let r=this._items[i];if(!ae(r.image))continue;e.save(),e.clip(r.path);let s=n.start+(n.end-n.start)/2;e.translate(this._center.x+Math.cos(E(s+-90))*(this._actualRadius*r.imageRadius),this._center.y+Math.sin(E(s+-90))*(this._actualRadius*r.imageRadius)),e.rotate(E(s+r.imageRotation)),e.globalAlpha=r.imageOpacity;let a=this._size/500*r.image.width*r.imageScale,o=this._size/500*r.image.height*r.imageScale,m=-a/2,l=-o/2;e.drawImage(r.image,m,l,a,o),e.restore()}}drawImage(e,t,i=!1){if(!ae(t))return;e.translate(this._center.x,this._center.y),i||e.rotate(E(this._rotation));let n=i?this._size:this._size*this.radius,r=-(n/2);e.drawImage(t,r,r,n,n),e.resetTransform()}drawPointerLine(e){!this.debug||(e.translate(this._center.x,this._center.y),e.rotate(E(this._pointerAngle+-90)),e.beginPath(),e.moveTo(0,0),e.lineTo(this._actualRadius*2,0),e.strokeStyle=j.pointerLineColor,e.lineWidth=this.getScaledNumber(2),e.stroke(),e.resetTransform())}drawBorder(e){if(this._borderWidth<=0)return;let t=this.getScaledNumber(this._borderWidth),i=this._borderColor||"transparent";if(e.beginPath(),e.strokeStyle=i,e.lineWidth=t,e.arc(this._center.x,this._center.y,this._actualRadius-t/2,0,2*Math.PI),e.stroke(),this.debug){let n=this.getScaledNumber(1);e.beginPath(),e.strokeStyle=e.strokeStyle=j.labelRadiusColor,e.lineWidth=n,e.arc(this._center.x,this._center.y,this._actualRadius*this.itemLabelRadius,0,2*Math.PI),e.stroke(),e.beginPath(),e.strokeStyle=e.strokeStyle=j.labelRadiusColor,e.lineWidth=n,e.arc(this._center.x,this._center.y,this._actualRadius*this.itemLabelRadiusMax,0,2*Math.PI),e.stroke()}}drawItemLines(e,t=[]){if(this._lineWidth<=0)return;let i=this.getScaledNumber(this._lineWidth),n=this.getScaledNumber(this._borderWidth);e.translate(this._center.x,this._center.y);for(let r of t)e.rotate(E(r.start+-90)),e.beginPath(),e.moveTo(0,0),e.lineTo(this._actualRadius-n,0),e.strokeStyle=this.lineColor,e.lineWidth=i,e.stroke(),e.rotate(-E(r.start+-90));e.resetTransform()}drawItemLabels(e,t=[]){let i=this.itemLabelFontSize*-this.itemLabelBaselineOffset,n=this.getScaledNumber(1),r=this.getScaledNumber(this._itemLabelStrokeWidth*2);for(let[s,a]of t.entries()){let o=this._items[s],m=o.labelColor||this._itemLabelColors[s%this._itemLabelColors.length]||"transparent";if(o.label.trim()===""||m==="transparent")continue;e.save(),e.clip(o.path);let l=a.start+(a.end-a.start)/2;e.translate(this._center.x+Math.cos(E(l+-90))*(this._actualRadius*this.itemLabelRadius),this._center.y+Math.sin(E(l+-90))*(this._actualRadius*this.itemLabelRadius)),e.rotate(E(l+-90)),e.rotate(E(this.itemLabelRotation)),this.debug&&(e.beginPath(),e.moveTo(0,0),e.lineTo(-this.labelMaxWidth,0),e.strokeStyle=j.labelOutlineColor,e.lineWidth=n,e.stroke(),e.strokeRect(0,-this.itemLabelFontSize/2,-this.labelMaxWidth,this.itemLabelFontSize)),this._itemLabelStrokeWidth>0&&(e.lineWidth=r,e.strokeStyle=this._itemLabelStrokeColor,e.lineJoin="round",e.strokeText(o.label,0,i)),e.fillStyle=m,e.fillText(o.label,0,i),e.restore()}}drawDragEvents(e){var t;if(!this.debug||!((t=this.dragEvents)!=null&&t.length))return;let i=[...this.dragEvents].reverse(),n=this.getScaledNumber(.5),r=this.getScaledNumber(4);for(let[s,a]of i.entries()){let o=s/this.dragEvents.length*100;e.beginPath(),e.arc(a.x,a.y,r,0,2*Math.PI),e.fillStyle=`hsl(${j.dragEventHue},100%,${o}%)`,e.strokeStyle="#000",e.lineWidth=n,e.fill(),e.stroke()}}animateRotation(e=0){if(this._spinToTimeEnd!==null){if(e>=this._spinToTimeEnd){this.rotation=this._spinToEndRotation,this._spinToTimeEnd=null,this.raiseEvent_onRest();return}let t=this._spinToTimeEnd-this._spinToTimeStart,i=(e-this._spinToTimeStart)/t;i=i<0?0:i;let n=this._spinToEndRotation-this._spinToStartRotation;this.rotation=this._spinToStartRotation+n*this._spinToEasingFunction(i),this.refresh();return}if(this._lastSpinFrameTime!==null){let t=e-this._lastSpinFrameTime;t>0&&(this.rotation+=t/1e3*this._rotationSpeed%360,this._rotationSpeed=this.getRotationSpeedPlusDrag(t),this._rotationSpeed===0?(this.raiseEvent_onRest(),this._lastSpinFrameTime=null):this._lastSpinFrameTime=e),this.refresh();return}}getRotationSpeedPlusDrag(e=0){let t=this._rotationSpeed+this.rotationResistance*(e/1e3)*this._rotationDirection;return this._rotationDirection===1&&t<0||this._rotationDirection===-1&&t>=0?0:t}spin(e=0){if(!x(e))throw new Error("rotationSpeed must be a number");this.dragEvents=[],this.beginSpin(e,"spin")}spinTo(e=0,t=0,i=null){if(!x(e))throw new Error("Error: rotation must be a number");if(!x(t))throw new Error("Error: duration must be a number");this.stop(),this.dragEvents=[],this.animate(e,t,i),this.raiseEvent_onSpin({method:"spinto",targetRotation:e,duration:t})}spinToItem(e=0,t=0,i=!0,n=1,r=1,s=null){this.stop(),this.dragEvents=[];let a=i?this.items[e].getCenterAngle():this.items[e].getRandomAngle(),o=pt(this.rotation,a-this._pointerAngle,r);o+=n*360*r,this.animate(o,t,s),this.raiseEvent_onSpin({method:"spintoitem",targetItemIndex:e,targetRotation:o,duration:t})}animate(e,t,i){this._spinToStartRotation=this.rotation,this._spinToEndRotation=e,this._spinToTimeStart=performance.now(),this._spinToTimeEnd=this._spinToTimeStart+t,this._spinToEasingFunction=i||wt,this.refresh()}stop(){this._spinToTimeEnd=null,this._rotationSpeed=0,this._lastSpinFrameTime=null}getScaledNumber(e){return e/500*this._size}getActualPixelRatio(){return this._pixelRatio!==0?this._pixelRatio:window.devicePixelRatio}wheelHitTest(e={x:0,y:0}){let t=G(e,this.canvas,this.getActualPixelRatio());return ft(t,this._center.x,this._center.y,this._actualRadius)}refreshCursor(){if(this.isInteractive){if(this.isDragging){this.canvas.style.cursor="grabbing";return}if(this._isCursorOverWheel){this.canvas.style.cursor="grab";return}}this.canvas.style.cursor=""}getAngleFromCenter(e={x:0,y:0}){return(gt(this._center.x,this._center.y,e.x,e.y)+90)%360}getCurrentIndex(){return this._currentIndex}refreshCurrentIndex(e=[]){this._items.length===0&&(this._currentIndex=-1);for(let[t,i]of e.entries())if(ct(this._pointerAngle,i.start%360,i.end%360)){if(this._currentIndex===t)break;this._currentIndex=t,this._isInitialising||this.raiseEvent_onCurrentIndexChange();break}}getItemAngles(e=0){let t=0;for(let a of this.items)t+=a.weight;let i=360/t,n,r=e,s=[];for(let a of this._items)n=a.weight*i,s.push({start:r,end:r+n}),r+=n;return this._items.length>1&&(s[s.length-1].end=s[0].start+360),s}refresh(){this._frameRequestId===null&&(this._frameRequestId=window.requestAnimationFrame(e=>this.draw(e)))}limitSpeed(e=0,t=0){let i=Math.min(e,t);return Math.max(i,-t)}beginSpin(e=0,t=""){this.stop(),this._rotationSpeed=this.limitSpeed(e,this._rotationSpeedMax),this._lastSpinFrameTime=performance.now(),this._rotationDirection=this._rotationSpeed>=0?1:-1,this._rotationSpeed!==0&&this.raiseEvent_onSpin({method:t,rotationSpeed:this._rotationSpeed,rotationResistance:this._rotationResistance}),this.refresh()}refreshAriaLabel(){this.canvas.setAttribute("role","img");let e=this.items.length>=2?` The wheel has ${this.items.length} slices.`:"";this.canvas.setAttribute("aria-label","An image of a spinning prize wheel."+e)}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=f({val:e,isValid:typeof e=="string",errorMessage:"Wheel.borderColor must be a string",defaultValue:u.wheel.borderColor}),this.refresh()}get borderWidth(){return this._borderWidth}set borderWidth(e){this._borderWidth=f({val:e,isValid:x(e),errorMessage:"Wheel.borderWidth must be a number",defaultValue:u.wheel.borderWidth}),this.refresh()}get debug(){return this._debug}set debug(e){this._debug=f({val:e,isValid:typeof e=="boolean",errorMessage:"Wheel.debug must be a boolean",defaultValue:u.wheel.debug}),this.refresh()}get image(){var e,t;return(t=(e=this._image)==null?void 0:e.src)!=null?t:null}set image(e){this._image=f({val:e,isValid:typeof e=="string"||e===null,errorMessage:"Wheel.image must be a url (string) or null",defaultValue:u.wheel.image,action:()=>{if(e===null)return null;let t=new Image;return t.src=e,t.onload=i=>this.refresh(),t}}),this.refresh()}get isInteractive(){return this._isInteractive}set isInteractive(e){this._isInteractive=f({val:e,isValid:typeof e=="boolean",errorMessage:"Wheel.isInteractive must be a boolean",defaultValue:u.wheel.isInteractive}),this.refreshCursor()}get itemBackgroundColors(){return this._itemBackgroundColors}set itemBackgroundColors(e){this._itemBackgroundColors=f({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.itemBackgroundColors must be an array",defaultValue:u.wheel.itemBackgroundColors}),this.refresh()}get itemLabelAlign(){return this._itemLabelAlign}set itemLabelAlign(e){this._itemLabelAlign=f({val:e,isValid:typeof e=="string",errorMessage:"Wheel.itemLabelAlign must be a string",defaultValue:u.wheel.itemLabelAlign}),this.refresh()}get itemLabelBaselineOffset(){return this._itemLabelBaselineOffset}set itemLabelBaselineOffset(e){this._itemLabelBaselineOffset=f({val:e,isValid:x(e),errorMessage:"Wheel.itemLabelBaselineOffset must be a number",defaultValue:u.wheel.itemLabelBaselineOffset}),this.resize()}get itemLabelColors(){return this._itemLabelColors}set itemLabelColors(e){this._itemLabelColors=f({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.itemLabelColors must be an array",defaultValue:u.wheel.itemLabelColors}),this.refresh()}get itemLabelFont(){return this._itemLabelFont}set itemLabelFont(e){this._itemLabelFont=f({val:e,isValid:typeof e=="string",errorMessage:"Wheel.itemLabelFont must be a string",defaultValue:u.wheel.itemLabelFont}),this.resize()}get itemLabelFontSizeMax(){return this._itemLabelFontSizeMax}set itemLabelFontSizeMax(e){this._itemLabelFontSizeMax=f({val:e,isValid:x(e),errorMessage:"Wheel.itemLabelFontSizeMax must be a number",defaultValue:u.wheel.itemLabelFontSizeMax}),this.resize()}get itemLabelRadius(){return this._itemLabelRadius}set itemLabelRadius(e){this._itemLabelRadius=f({val:e,isValid:x(e),errorMessage:"Wheel.itemLabelRadius must be a number",defaultValue:u.wheel.itemLabelRadius}),this.resize()}get itemLabelRadiusMax(){return this._itemLabelRadiusMax}set itemLabelRadiusMax(e){this._itemLabelRadiusMax=f({val:e,isValid:x(e),errorMessage:"Wheel.itemLabelRadiusMax must be a number",defaultValue:u.wheel.itemLabelRadiusMax}),this.resize()}get itemLabelRotation(){return this._itemLabelRotation}set itemLabelRotation(e){this._itemLabelRotation=f({val:e,isValid:x(e),errorMessage:"Wheel.itemLabelRotation must be a number",defaultValue:u.wheel.itemLabelRotation}),this.refresh()}get itemLabelStrokeColor(){return this._itemLabelStrokeColor}set itemLabelStrokeColor(e){this._itemLabelStrokeColor=f({val:e,isValid:typeof e=="string",errorMessage:"Wheel.itemLabelStrokeColor must be a string",defaultValue:u.wheel.itemLabelStrokeColor}),this.refresh()}get itemLabelStrokeWidth(){return this._itemLabelStrokeWidth}set itemLabelStrokeWidth(e){this._itemLabelStrokeWidth=f({val:e,isValid:x(e),errorMessage:"Wheel.itemLabelStrokeWidth must be a number",defaultValue:u.wheel.itemLabelStrokeWidth}),this.refresh()}get items(){return this._items}set items(e){this._items=f({val:e,isValid:Array.isArray(e),errorMessage:"Wheel.items must be an array of Items",defaultValue:u.wheel.items,action:()=>{let t=[];for(let i of e)t.push(new St(this,{backgroundColor:i.backgroundColor,image:i.image,imageRadius:i.imageRadius,imageRotation:i.imageRotation,imageScale:i.imageScale,label:i.label,labelColor:i.labelColor,value:i.value,weight:i.weight}));return t}}),this.refreshAriaLabel(),this.refreshCurrentIndex(this.getItemAngles(this._rotation)),this.resize()}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=f({val:e,isValid:typeof e=="string",errorMessage:"Wheel.lineColor must be a string",defaultValue:u.wheel.lineColor}),this.refresh()}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=f({val:e,isValid:x(e),errorMessage:"Wheel.lineWidth must be a number",defaultValue:u.wheel.lineWidth}),this.refresh()}get offset(){return this._offset}set offset(e){this._offset=f({val:e,isValid:U(e),errorMessage:"Wheel.offset must be an object",defaultValue:u.wheel.offset}),this.resize()}get onCurrentIndexChange(){return this._onCurrentIndexChange}set onCurrentIndexChange(e){this._onCurrentIndexChange=f({val:e,isValid:typeof e=="function"||e===null,errorMessage:"Wheel.onCurrentIndexChange must be a function or null",defaultValue:u.wheel.onCurrentIndexChange})}get onRest(){return this._onRest}set onRest(e){this._onRest=f({val:e,isValid:typeof e=="function"||e===null,errorMessage:"Wheel.onRest must be a function or null",defaultValue:u.wheel.onRest})}get onSpin(){return this._onSpin}set onSpin(e){this._onSpin=f({val:e,isValid:typeof e=="function"||e===null,errorMessage:"Wheel.onSpin must be a function or null",defaultValue:u.wheel.onSpin})}get overlayImage(){var e,t;return(t=(e=this._overlayImage)==null?void 0:e.src)!=null?t:null}set overlayImage(e){this._overlayImage=f({val:e,isValid:typeof e=="string"||e===null,errorMessage:"Wheel.overlayImage must be a url (string) or null",defaultValue:u.wheel.overlayImage,action:()=>{if(e===null)return null;let t=new Image;return t.src=e,t.onload=i=>this.refresh(),t}}),this.refresh()}get pixelRatio(){return this._pixelRatio}set pixelRatio(e){this._pixelRatio=f({val:e,isValid:x(e),errorMessage:"Wheel.pixelRatio must be a number",defaultValue:u.wheel.pixelRatio}),this.dragEvents=[],this.resize()}get pointerAngle(){return this._pointerAngle}set pointerAngle(e){this._pointerAngle=f({val:e,isValid:x(e)&&e>=0,errorMessage:"Wheel.pointerAngle must be a number between 0 and 360",defaultValue:u.wheel.pointerAngle,action:()=>e%360}),this.debug&&this.refresh()}get radius(){return this._radius}set radius(e){this._radius=f({val:e,isValid:x(e),errorMessage:"Wheel.radius must be a number",defaultValue:u.wheel.radius}),this.resize()}get rotation(){return this._rotation}set rotation(e){this._rotation=f({val:e,isValid:x(e),errorMessage:"Wheel.rotation must be a number",defaultValue:u.wheel.rotation}),this.refreshCurrentIndex(this.getItemAngles(this._rotation)),this.refresh()}get rotationResistance(){return this._rotationResistance}set rotationResistance(e){this._rotationResistance=f({val:e,isValid:x(e),errorMessage:"Wheel.rotationResistance must be a number",defaultValue:u.wheel.rotationResistance})}get rotationSpeed(){return this._rotationSpeed}get rotationSpeedMax(){return this._rotationSpeedMax}set rotationSpeedMax(e){this._rotationSpeedMax=f({val:e,isValid:x(e)&&e>=0,errorMessage:"Wheel.rotationSpeedMax must be a number >= 0",defaultValue:u.wheel.rotationSpeedMax})}dragStart(e={x:0,y:0}){let t=G(e,this.canvas,this.getActualPixelRatio());this.isDragging=!0,this.stop(),this.dragEvents=[{distance:0,x:t.x,y:t.y,now:performance.now()}],this.refreshCursor()}dragMove(e={x:0,y:0}){let t=G(e,this.canvas,this.getActualPixelRatio()),i=this.getAngleFromCenter(t),n=this.dragEvents[0],r=this.getAngleFromCenter(n),s=bt(r,i);this.dragEvents.unshift({distance:s,x:t.x,y:t.y,now:performance.now()}),this.debug&&this.dragEvents.length>=40&&this.dragEvents.pop(),this.rotation+=s}dragEnd(){this.isDragging=!1;let e=0,t=performance.now();for(let[i,n]of this.dragEvents.entries()){if(!this.isDragEventTooOld(t,n)){e+=n.distance;continue}this.dragEvents.length=i,this.debug&&this.refresh();break}this.refreshCursor(),e!==0&&this.beginSpin(e*(1e3/250),"interact")}isDragEventTooOld(e=0,t={}){return e-t.now>250}raiseEvent_onCurrentIndexChange(e={}){var t;(t=this.onCurrentIndexChange)==null||t.call(this,K({type:"currentIndexChange",currentIndex:this._currentIndex},e))}raiseEvent_onRest(e={}){var t;(t=this.onRest)==null||t.call(this,K({type:"rest",currentIndex:this._currentIndex,rotation:this._rotation},e))}raiseEvent_onSpin(e={}){var t;(t=this.onSpin)==null||t.call(this,K({type:"spin"},e))}};function oe(e){let t,i,n,r,s,a;return{c(){t=R("div"),i=R("div"),n=R("p"),r=H(e[2]),this.h()},l(o){t=L(o,"DIV",{id:!0,class:!0});var m=F(t);i=L(m,"DIV",{class:!0});var l=F(i);n=L(l,"P",{class:!0});var h=F(n);r=$(h,e[2]),h.forEach(_),l.forEach(_),m.forEach(_),this.h()},h(){y(n,"class","text-3xl"),y(i,"class","w-8/12 h-1/3 bg-blue-400 flex items-center justify-center rounded-lg glow svelte-1w1m62e"),y(t,"id","overlay"),y(t,"class","absolute w-screen h-screen top-0 flex items-center justify-center")},m(o,m){C(o,t,m),T(t,i),T(i,n),T(n,r),s||(a=N(t,"click",e[3]),s=!0)},p(o,m){m&4&&he(r,o[2])},d(o){o&&_(t),s=!1,a()}}}function Lt(e){let t,i=e[2]&&e[1]<e[0]&&oe(e);return{c(){i&&i.c(),t=B()},l(n){i&&i.l(n),t=B()},m(n,r){i&&i.m(n,r),C(n,t,r)},p(n,[r]){n[2]&&n[1]<n[0]?i?i.p(n,r):(i=oe(n),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:V,o:V,d(n){n&&_(t),i&&i.d(n)}}}function Mt(e,t,i){const n=ye();let r=0,s=0,a="",o=null;async function m(b,M){return new Promise(async(O,q)=>{h(),i(0,r++,r);let W=r;i(2,a=b),o=O,setTimeout(()=>{r==W&&s!=r&&h()},M)})}function l(){if(s!=r)return h()}async function h(){o&&(o(),o=null,i(1,s=r),n("dismissed",{}))}return[r,s,a,h,m,l]}class kt extends ee{constructor(t){super(),te(this,t,Mt,Lt,Z,{showMessage:4,forceDismiss:5})}get showMessage(){return this.$$.ctx[4]}get forceDismiss(){return this.$$.ctx[5]}}const{window:Et}=Ee;function Tt(e){let t,i="[WAIT]",n,r,s="[WAIT]";return{c(){t=R("p"),t.textContent=i,n=P(),r=R("p"),r.textContent=s,this.h()},l(a){t=L(a,"P",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-ti16rn"&&(t.textContent=i),n=z(a),r=L(a,"P",{class:!0,"data-svelte-h":!0}),D(r)!=="svelte-ti16rn"&&(r.textContent=s),this.h()},h(){y(t,"class","mx-2 border border-white text-white p-1 hover:opacity-80 svelte-payqe8"),y(r,"class","mx-2 border border-white text-white p-1 hover:opacity-80 svelte-payqe8")},m(a,o){C(a,t,o),C(a,n,o),C(a,r,o)},p:V,d(a){a&&(_(t),_(n),_(r))}}}function Wt(e){let t,i="Spin",n,r,s,a;function o(h,b){return h[3]?Ot:Vt}let m=o(e),l=m(e);return{c(){t=R("button"),t.textContent=i,n=P(),l.c(),r=B(),this.h()},l(h){t=L(h,"BUTTON",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-mklhax"&&(t.textContent=i),n=z(h),l.l(h),r=B(),this.h()},h(){y(t,"class","mx-2 border border-white text-white p-1 hover:opacity-80 svelte-payqe8")},m(h,b){C(h,t,b),C(h,n,b),l.m(h,b),C(h,r,b),s||(a=N(t,"click",e[6]),s=!0)},p(h,b){m===(m=o(h))&&l?l.p(h,b):(l.d(1),l=m(h),l&&(l.c(),l.m(r.parentNode,r)))},d(h){h&&(_(t),_(n),_(r)),l.d(h),s=!1,a()}}}function Ot(e){let t,i="Click again to confirm reset",n,r;return{c(){t=R("button"),t.textContent=i,this.h()},l(s){t=L(s,"BUTTON",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-1tzhdan"&&(t.textContent=i),this.h()},h(){y(t,"class","mx-2 border border-red-600 text-red-600 p-1 hover:opacity-80 svelte-payqe8")},m(s,a){C(s,t,a),n||(r=N(t,"click",e[5]),n=!0)},p:V,d(s){s&&_(t),n=!1,r()}}}function Vt(e){let t,i="Reset",n,r;return{c(){t=R("button"),t.textContent=i,this.h()},l(s){t=L(s,"BUTTON",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-184p6zr"&&(t.textContent=i),this.h()},h(){y(t,"class","mx-2 border border-white text-white p-1 hover:opacity-80 svelte-payqe8")},m(s,a){C(s,t,a),n||(r=N(t,"click",e[10]),n=!0)},p:V,d(s){s&&_(t),n=!1,r()}}}function le(e){let t,i,n,r;return{c(){t=R("p"),i=H('Previous roll: "'),n=H(e[4]),r=H('"'),this.h()},l(s){t=L(s,"P",{class:!0});var a=F(t);i=$(a,'Previous roll: "'),n=$(a,e[4]),r=$(a,'"'),a.forEach(_),this.h()},h(){y(t,"class","text-xs svelte-payqe8")},m(s,a){C(s,t,a),T(t,i),T(t,n),T(t,r)},p(s,a){a&16&&he(n,s[4])},d(s){s&&_(t)}}}function At(e){let t,i,n,r,s,a,o,m="Back to editing list",l,h,b,M,O;function q(g,v){return g[1]?Tt:Wt}let W=q(e),k=W(e),p=e[4]&&le(e),Q={};return h=new kt({props:Q}),e[12](h),{c(){t=R("div"),i=R("div"),n=P(),r=R("div"),k.c(),s=P(),p&&p.c(),a=P(),o=R("button"),o.textContent=m,l=P(),de(h.$$.fragment),this.h()},l(g){t=L(g,"DIV",{class:!0});var v=F(t);i=L(v,"DIV",{id:!0,class:!0}),F(i).forEach(_),n=z(v),r=L(v,"DIV",{id:!0,class:!0});var A=F(r);k.l(A),A.forEach(_),s=z(v),p&&p.l(v),v.forEach(_),a=z(g),o=L(g,"BUTTON",{class:!0,"data-svelte-h":!0}),D(o)!=="svelte-1hklg2w"&&(o.textContent=m),l=z(g),ce(h.$$.fragment,g),this.h()},h(){y(i,"id","wheeldiv"),y(i,"class","w-11/12 h-11/12 svelte-payqe8"),y(r,"id","controls"),y(r,"class","flex flex-row justify-between items-center svelte-payqe8"),y(t,"class","flex flex-col items-center justify-evenly w-[100vw] h-[100vh] svelte-payqe8"),y(o,"class","border border-red-100 text-red-100 p-1 hover:opacity-80 fixed left-0 bottom-0 svelte-payqe8")},m(g,v){C(g,t,v),T(t,i),e[9](i),T(t,n),T(t,r),k.m(r,null),T(t,s),p&&p.m(t,null),C(g,a,v),C(g,o,v),C(g,l,v),me(h,g,v),b=!0,M||(O=[N(Et,"keydown",e[7]),N(o,"click",e[11])],M=!0)},p(g,[v]){W===(W=q(g))&&k?k.p(g,v):(k.d(1),k=W(g),k&&(k.c(),k.m(r,null))),g[4]?p?p.p(g,v):(p=le(g),p.c(),p.m(t,null)):p&&(p.d(1),p=null);const A={};h.$set(A)},i(g){b||(X(h.$$.fragment,g),b=!0)},o(g){Y(h.$$.fragment,g),b=!1},d(g){g&&(_(t),_(a),_(o),_(l)),e[9](null),k.d(),p&&p.d(),e[12](null),fe(h,g),M=!1,Ie(O)}}}function Pt(e,t){return Math.floor(Math.random()*(t-e+1))+e}async function zt(e){return new Promise((t,i)=>{setTimeout(t,e)})}function Ft(e,t,i){let{fields:n={}}=t,r,s={},a=[],o=!1,m,l,h=!0,b=!0,M=!1,O="";function q(){let d=[];for(const I in s){const S=s[I];S.limit!=0&&S.spins>=S.limit||d.push({item:S.name,weight:S.weight})}if(d.length<1)return null;let w=ot(d);return s[w]}async function W(){Q(),i(4,O=""),await r.showMessage("Wheel has been reset",5e3)}function k(){const d={},w=[];for(const S in s)w.push(S);Me(w).forEach(S=>{d[S]=s[S]}),s=d}function p(){i(2,l.innerHTML="",l),a=[];let d=0;for(const w in s){const I=s[w];if(s[w].wheelIndex=-1,I.limit!=0&&I.spins>=I.limit){if(!h)continue;a.push({label:I.name,weight:I.weight,backgroundColor:"#331414"})}else a.push({label:I.name,weight:I.weight});s[w].wheelIndex=d,d++}m=new Rt(l,{overlayImage:"/wheel-overlay.png",items:a,itemBackgroundColors:["#628db4","#7198bc","#81a3c3","#90aecb","#9fbad2","#547a9c","#476785","#3a556e"],isInteractive:!1,rotationResistance:0})}function Q(){s={},i(1,o=!1);for(const d in n){const w=n[d];w.weight!==0&&(s[w.name]={name:w.name,weight:w.weight,limit:w.limit,spins:0,wheelIndex:-1})}k(),p()}async function g(d){m.spinTo(d,1,null)}async function v(d,w){const I=w,S=Te,xe=Pt(3,5);m.spinToItem(d,I,!1,xe,1,S)}async function A(){i(1,o=!0);const d=q();if(!d){await r.showMessage("Yeah the thing is, there's no valid options to roll for",2e3),i(1,o=!1);return}d.spins++;const w=d.wheelIndex,I=6e3;if(v(w,I),await zt(I),await r.showMessage(`${d.name}`,5e3),d.limit!=0&&d.spins>=d.limit){if(await r.showMessage(`${d.name} is no longer an option (${d.spins}/${d.limit} rolls)`,3e3),h){let S=m.rotation;p(),g(S)}else p();b&&m.spin(50)}i(1,o=!1),i(4,O=d.name)}function _e(d){switch(d.code){case"Space":r.forceDismiss(),o||A(),d.preventDefault();break;case"KeyE":if(o)return;M?(W(),i(3,M=!1)):(setTimeout(()=>{i(3,M=!1)},3*1e3),i(3,M=!0));break}}function be(){h=localStorage.getItem("wheel-showdisabled")=="true",b=localStorage.getItem("wheel-idlespin")=="true"}ue(()=>{be(),setTimeout(()=>{Q(),b&&m.spin(50)},1)});function pe(d){ne[d?"unshift":"push"](()=>{l=d,i(2,l)})}const ve=()=>{setTimeout(()=>{i(3,M=!1)},4*1e3),i(3,M=!0)},we=()=>{window.location.href="/"};function Ce(d){ne[d?"unshift":"push"](()=>{r=d,i(0,r)})}return e.$$set=d=>{"fields"in d&&i(8,n=d.fields)},[r,o,l,M,O,W,A,_e,n,pe,ve,we,Ce]}class Dt extends ee{constructor(t){super(),te(this,t,Ft,At,Z,{fields:8})}}function Bt(e){let t,i="No fields?";return{c(){t=R("p"),t.textContent=i},l(n){t=L(n,"P",{"data-svelte-h":!0}),D(t)!=="svelte-8hqb6f"&&(t.textContent=i)},m(n,r){C(n,t,r)},p:V,i:V,o:V,d(n){n&&_(t)}}}function Nt(e){let t,i;return t=new Dt({props:{fields:e[0]}}),{c(){de(t.$$.fragment)},l(n){ce(t.$$.fragment,n)},m(n,r){me(t,n,r),i=!0},p(n,r){const s={};r&1&&(s.fields=n[0]),t.$set(s)},i(n){i||(X(t.$$.fragment,n),i=!0)},o(n){Y(t.$$.fragment,n),i=!1},d(n){fe(t,n)}}}function qt(e){let t,i,n,r,s;const a=[Nt,Bt],o=[];function m(l,h){return l[0]?0:1}return i=m(e),n=o[i]=a[i](e),{c(){t=P(),n.c(),r=B(),this.h()},l(l){Se("svelte-1gyjtg3",document.head).forEach(_),t=z(l),n.l(l),r=B(),this.h()},h(){document.title="MFM Wheel - Spin"},m(l,h){C(l,t,h),o[i].m(l,h),C(l,r,h),s=!0},p(l,[h]){let b=i;i=m(l),i===b?o[i].p(l,h):(Le(),Y(o[b],1,1,()=>{o[b]=null}),Re(),n=o[i],n?n.p(l,h):(n=o[i]=a[i](l),n.c()),X(n,1),n.m(r.parentNode,r))},i(l){s||(X(n),s=!0)},o(l){Y(n),s=!1},d(l){l&&(_(t),_(r)),o[i].d(l)}}}function jt(e,t,i){let n={};const r=ke();function s(){const a=localStorage.getItem("save");if(a===null)return;if(localStorage.getItem("save-version")!=r){window.location.href="/migrate";return}const o=JSON.parse(a);i(0,n=o)}return ue(()=>{s()}),[n]}class Yt extends ee{constructor(t){super(),te(this,t,jt,qt,Z,{})}}export{Yt as component};
